(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{1209:function(e,t,s){Promise.resolve().then(s.bind(s,4673))},4673:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return n}});var r=s(7573),a=s(7653),l=s(6940);function n(){let[e,t]=(0,a.useState)(""),[s,n]=(0,a.useState)(!1),[i,d]=(0,a.useState)([]),[c,o]=(0,a.useState)({total:0,verified:0,pending:0,rate:0}),[x,m]=(0,a.useState)(!1);(0,l.createClientComponentClient)(),(0,a.useEffect)(()=>{"true"===localStorage.getItem("admin-auth")&&(n(!0),h())},[]);let h=async()=>{m(!0);try{let{data:e,error:t}=await fetch("/api/admin/waitlist").then(e=>e.json());if(t){console.error("Error:",t),alert("Fehler beim Laden: "+t);return}d(e||[]);let s=(null==e?void 0:e.length)||0,r=(null==e?void 0:e.filter(e=>e.verified).length)||0;o({total:s,verified:r,pending:s-r,rate:s>0?Math.round(r/s*100):0})}catch(e){console.error("Catch error:",e),alert("Netzwerkfehler!")}finally{m(!1)}};return s?(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)("nav",{className:"bg-white border-b border-gray-200 shadow-sm",children:(0,r.jsxs)("div",{className:"container mx-auto px-4 py-4 flex justify-between items-center",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-red-600",children:"ImmoW\xe4chter Admin"}),(0,r.jsx)("button",{onClick:()=>{n(!1),localStorage.removeItem("admin-auth")},className:"text-sm text-red-600 hover:text-red-700 font-medium",children:"Logout"})]})}),(0,r.jsxs)("main",{className:"container mx-auto px-4 py-8",children:[(0,r.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-8",children:"\uD83D\uDCCA Waitlist Dashboard"}),x?(0,r.jsx)("div",{className:"text-center py-12",children:(0,r.jsx)("p",{className:"text-gray-600",children:"Loading..."})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"grid md:grid-cols-4 gap-6 mb-8",children:[(0,r.jsx)("div",{className:"bg-white rounded-lg shadow p-6 border border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Total Users"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:c.total})]}),(0,r.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-2xl",children:"\uD83D\uDC65"})})]})}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow p-6 border border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Verified"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-green-600",children:c.verified})]}),(0,r.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-2xl",children:"✅"})})]})}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow p-6 border border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Pending"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-yellow-600",children:c.pending})]}),(0,r.jsx)("div",{className:"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-2xl",children:"⏳"})})]})}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow p-6 border border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Verification Rate"}),(0,r.jsxs)("p",{className:"text-3xl font-bold text-purple-600",children:[c.rate,"%"]})]}),(0,r.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCCA"})})]})})]}),(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsx)("button",{onClick:()=>{let e=new Blob([["Email,Verified,Created At",...i.map(e=>[e.email,e.verified?"Yes":"No",new Date(e.created_at).toLocaleDateString("de-AT")].join(","))].join("\n")],{type:"text/csv"}),t=window.URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.download="waitlist-export-".concat(new Date().toISOString().split("T")[0],".csv"),s.click()},className:"bg-green-600 text-white px-6 py-3 rounded-lg font-bold hover:bg-green-700 transition",children:"\uD83D\uDCE5 Export CSV"})}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow border border-gray-200",children:[(0,r.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"All Users"})}),(0,r.jsx)("div",{className:"p-6",children:0===i.length?(0,r.jsx)("p",{className:"text-gray-500",children:"Keine User gefunden. Pr\xfcfe Supabase Datenbank!"}):(0,r.jsx)("div",{className:"space-y-3",children:i.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[e.verified?(0,r.jsx)("span",{className:"text-green-500 text-xl",children:"✅"}):(0,r.jsx)("span",{className:"text-yellow-500 text-xl",children:"⏳"}),(0,r.jsx)("span",{className:"font-mono text-sm text-gray-700",children:e.email})]}),(0,r.jsx)("span",{className:"text-xs text-gray-500",children:new Date(e.created_at).toLocaleDateString("de-AT",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})})]},e.id))})})]})]})]})]}):(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,r.jsxs)("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"\uD83D\uDD10 Admin Dashboard"}),(0,r.jsx)("p",{className:"text-gray-600",children:"ImmoW\xe4chter"})]}),(0,r.jsxs)("form",{onSubmit:t=>{t.preventDefault(),"immow\xe4chter2025"===e?(n(!0),localStorage.setItem("admin-auth","true"),h()):alert("Falsches Passwort!")},className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Passwort"}),(0,r.jsx)("input",{type:"password",value:e,onChange:e=>t(e.target.value),required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"••••••••"})]}),(0,r.jsx)("button",{type:"submit",className:"w-full bg-red-600 text-white py-3 rounded-lg font-bold hover:bg-red-700 transition",children:"Login"})]})]})})}}},function(e){e.O(0,[978,940,293,528,744],function(){return e(e.s=1209)}),_N_E=e.O()}]);