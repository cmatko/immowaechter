(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{5126:function(e,s,t){Promise.resolve().then(t.bind(t,1513))},1513:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return d}});var r=t(7573),i=t(7653),n=t(1867),l=t(1695),a=t(6240);function d(){let e=(0,l.useRouter)(),[s,t]=(0,i.useState)([]),[d,o]=(0,i.useState)(!0),[c,m]=(0,i.useState)(null),[x,h]=(0,i.useState)("");return((0,i.useEffect)(()=>{(async function(){let{data:{session:s}}=await n.O.auth.getSession();if(!s){e.push("/login");return}m(s),h(s.user.email||"");let{data:r,error:i}=await n.O.from("properties").select("*").order("created_at",{ascending:!1});i?console.error("Error loading properties:",i):t(r||[]),o(!1)})()},[e]),d)?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),(0,r.jsx)("p",{className:"mt-4 text-gray-600",children:"L\xe4dt..."})]})}):c?(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)("div",{className:"bg-white shadow",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Meine Immobilien"}),(0,r.jsxs)("a",{href:"/properties/new",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 transition-colors",children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Neue Immobilie"]})]})})}),(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,r.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0 bg-indigo-100 rounded-md p-3",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Gesamt Immobilien"}),(0,r.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:(null==s?void 0:s.length)||0})]})]})}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0 bg-green-100 rounded-md p-3",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Vermietet"}),(0,r.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:(null==s?void 0:s.filter(e=>"rented"===e.status).length)||0})]})]})}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0 bg-yellow-100 rounded-md p-3",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Verf\xfcgbar"}),(0,r.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:(null==s?void 0:s.filter(e=>"available"===e.status).length)||0})]})]})})]}),s&&s.length>0?(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(e=>(0,r.jsx)("div",{className:"bg-white rounded-lg shadow hover:shadow-lg transition-shadow",children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:e.name}),(0,r.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat("rented"===e.status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:"rented"===e.status?"Vermietet":"Verf\xfcgbar"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,r.jsxs)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),e.address]}),(0,r.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),e.type]})]}),(0,r.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200 flex justify-between items-center",children:[(0,r.jsx)("a",{href:"/properties/".concat(e.id),className:"text-sm text-indigo-600 hover:text-indigo-800 font-medium transition-colors",children:"Details ansehen →"}),(0,r.jsx)(a.Z,{propertyId:e.id,propertyName:e.name})]})]})},e.id))}):(0,r.jsxs)("div",{className:"text-center py-12 bg-white rounded-lg shadow",children:[(0,r.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),(0,r.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Keine Immobilien"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Legen Sie Ihre erste Immobilie an."}),(0,r.jsx)("div",{className:"mt-6",children:(0,r.jsxs)("a",{href:"/properties/new",className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700",children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Neue Immobilie"]})})]})]})]}):null}},6240:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});var r=t(7573),i=t(7653),n=t(1867),l=t(1695);function a(e){let{propertyId:s,propertyName:t}=e,a=(0,l.useRouter)(),[d,o]=(0,i.useState)(!1),[c,m]=(0,i.useState)(!1),x=async()=>{m(!0);let{error:e}=await n.O.from("properties").delete().eq("id",s);if(e){alert("Fehler beim L\xf6schen: "+e.message),m(!1),o(!1);return}window.location.href="/dashboard",a.refresh()};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{onClick:()=>o(!0),className:"px-4 py-2 border border-red-600 text-red-600 rounded-lg font-medium hover:bg-red-50 transition",children:"\uD83D\uDDD1️ L\xf6schen"}),d&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)("span",{className:"text-3xl",children:"⚠️"})}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 text-center mb-4",children:"Immobilie wirklich l\xf6schen?"}),(0,r.jsx)("p",{className:"text-center mb-4 text-gray-700",children:(0,r.jsx)("strong",{children:t})}),(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:[(0,r.jsx)("p",{className:"text-sm text-red-800 mb-2 font-bold",children:"⚠️ Diese Aktion kann NICHT r\xfcckg\xe4ngig gemacht werden!"}),(0,r.jsxs)("ul",{className:"text-sm text-red-700 space-y-1",children:[(0,r.jsx)("li",{children:"• Alle Wartungen werden gel\xf6scht"}),(0,r.jsx)("li",{children:"• Alle Dokumente werden gel\xf6scht"}),(0,r.jsx)("li",{children:"• Der Wartungsverlauf geht verloren"})]})]}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)("button",{onClick:()=>o(!1),disabled:c,className:"flex-1 px-6 py-3 border border-gray-300 rounded-lg font-bold text-gray-700 hover:bg-gray-50 transition disabled:opacity-50",children:"Abbrechen"}),(0,r.jsx)("button",{onClick:x,disabled:c,className:"flex-1 px-6 py-3 bg-red-600 text-white rounded-lg font-bold hover:bg-red-700 transition disabled:opacity-50",children:c?"Wird gel\xf6scht...":"Ja, endg\xfcltig l\xf6schen"})]})]})})]})}},1867:function(e,s,t){"use strict";t.d(s,{O:function(){return r}});let r=(0,t(2978).eI)("https://cfggqkjogprlzikzxijc.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNmZ2dxa2pvZ3BybHppa3p4aWpjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA2MzQzMDksImV4cCI6MjA3NjIxMDMwOX0.gyIVDXpqTWpZjKzE1qmI-ObeIb0D6pIoZPfwu3gtzpk")},1695:function(e,s,t){"use strict";var r=t(1219);t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}})}},function(e){e.O(0,[978,293,528,744],function(){return e(e.s=5126)}),_N_E=e.O()}]);