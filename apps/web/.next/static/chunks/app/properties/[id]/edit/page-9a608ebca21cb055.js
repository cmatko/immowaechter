(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[762],{1996:function(e,r,a){Promise.resolve().then(a.bind(a,8482))},8482:function(e,r,a){"use strict";a.r(r),a.d(r,{default:function(){return d}});var t=a(7573),s=a(7653),l=a(1867),i=a(1695),n=a(8146);function d(e){let{params:r}=e,a=(0,i.useRouter)(),[d,o]=(0,s.useState)(!0),[c,u]=(0,s.useState)(!1),[m,p]=(0,s.useState)(""),[g,b]=(0,s.useState)({name:"",address:"",postal_code:"",city:"",property_type:"house",build_year:new Date().getFullYear(),living_area:""});(0,s.useEffect)(()=>{x()},[r.id]);let x=async()=>{var e;let{data:{session:t}}=await l.O.auth.getSession();if(!t){a.push("/login");return}let{data:s,error:i}=await l.O.from("properties").select("*").eq("id",r.id).single();if(i||!s){p("Immobilie nicht gefunden"),o(!1);return}if(s.user_id!==t.user.id){p("Keine Berechtigung"),o(!1);return}b({name:s.name||"",address:s.address||"",postal_code:s.postal_code||"",city:s.city||"",property_type:s.property_type||"house",build_year:s.build_year||new Date().getFullYear(),living_area:(null===(e=s.living_area)||void 0===e?void 0:e.toString())||""}),o(!1)},h=async e=>{e.preventDefault(),u(!0),p("");try{let{error:e}=await l.O.from("properties").update({name:g.name,address:g.address,postal_code:g.postal_code,city:g.city,property_type:g.property_type,build_year:g.build_year,living_area:g.living_area?parseFloat(g.living_area):null,updated_at:new Date().toISOString()}).eq("id",r.id);if(e){p(e.message),u(!1);return}window.location.href="/properties/".concat(r.id)}catch(e){p(e.message||"Ein Fehler ist aufgetreten"),u(!1)}};return d?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),(0,t.jsx)("p",{className:"mt-4 text-gray-600",children:"L\xe4dt..."})]})}):m&&!g.name?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Fehler"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:m}),(0,t.jsx)(n.default,{href:"/dashboard",className:"text-indigo-600 hover:text-indigo-800 font-medium",children:"← Zur\xfcck zum Dashboard"})]})}):(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 py-12 px-4",children:(0,t.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)(n.default,{href:"/properties/".concat(r.id),className:"text-indigo-600 hover:text-indigo-800 font-medium mb-2 inline-block",children:"← Zur\xfcck zur Immobilie"}),(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Immobilie bearbeiten"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Aktualisiere die Details deiner Immobilie"})]}),m&&(0,t.jsxs)("div",{className:"bg-red-50 border border-red-200 text-red-600 p-4 rounded-lg mb-6",children:["⚠️ ",m]}),(0,t.jsxs)("form",{onSubmit:h,className:"bg-white p-8 rounded-lg shadow",children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Name/Bezeichnung *"}),(0,t.jsx)("input",{type:"text",placeholder:"z.B. Haus Hauptstra\xdfe, Wohnung Stadtzentrum",value:g.name,onChange:e=>b({...g,name:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",required:!0})]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Adresse *"}),(0,t.jsx)("input",{type:"text",placeholder:"Stra\xdfe und Hausnummer",value:g.address,onChange:e=>b({...g,address:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",required:!0})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Postleitzahl *"}),(0,t.jsx)("input",{type:"text",placeholder:"1010",value:g.postal_code,onChange:e=>{let r=e.target.value.replace(/\D/g,"");b({...g,postal_code:r})},className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",pattern:"[0-9]{4,5}",maxLength:5,required:!0}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"4-5 Ziffern (AT: 4, DE: 5)"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Stadt *"}),(0,t.jsx)("input",{type:"text",placeholder:"Wien",value:g.city,onChange:e=>b({...g,city:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",required:!0})]})]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Immobilientyp *"}),(0,t.jsxs)("select",{value:g.property_type,onChange:e=>b({...g,property_type:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",children:[(0,t.jsx)("option",{value:"house",children:"\uD83C\uDFE1 Einfamilienhaus"}),(0,t.jsx)("option",{value:"apartment",children:"\uD83C\uDFE2 Wohnung"}),(0,t.jsx)("option",{value:"multi_family",children:"\uD83C\uDFD8️ Mehrfamilienhaus"}),(0,t.jsx)("option",{value:"commercial",children:"\uD83C\uDFED Gewerbeobjekt"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Baujahr"}),(0,t.jsx)("input",{type:"number",placeholder:"2000",value:g.build_year,onChange:e=>b({...g,build_year:parseInt(e.target.value)}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",min:"1800",max:new Date().getFullYear()+1})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Wohnfl\xe4che (m\xb2)"}),(0,t.jsx)("input",{type:"number",placeholder:"120",value:g.living_area,onChange:e=>b({...g,living_area:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",step:"0.1"})]})]}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)("button",{type:"submit",disabled:c,className:"flex-1 bg-indigo-600 text-white py-3 px-6 rounded-lg font-bold hover:bg-indigo-700 transition disabled:opacity-50",children:c?"Wird gespeichert...":"✅ \xc4nderungen speichern"}),(0,t.jsx)(n.default,{href:"/properties/".concat(r.id),className:"px-6 py-3 border border-gray-300 rounded-lg font-bold text-gray-700 hover:bg-gray-50 transition text-center",children:"Abbrechen"})]})]})]})})}},1867:function(e,r,a){"use strict";a.d(r,{O:function(){return t}});let t=(0,a(2978).eI)("https://cfggqkjogprlzikzxijc.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNmZ2dxa2pvZ3BybHppa3p4aWpjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA2MzQzMDksImV4cCI6MjA3NjIxMDMwOX0.gyIVDXpqTWpZjKzE1qmI-ObeIb0D6pIoZPfwu3gtzpk")}},function(e){e.O(0,[978,738,293,528,744],function(){return e(e.s=1996)}),_N_E=e.O()}]);