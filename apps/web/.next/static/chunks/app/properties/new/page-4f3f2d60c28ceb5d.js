(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[908],{4800:function(e,r,a){Promise.resolve().then(a.bind(a,2146))},2146:function(e,r,a){"use strict";a.r(r),a.d(r,{default:function(){return d}});var s=a(7573),t=a(7653),l=a(1867),n=a(1695),i=a(8146);function d(){let e=(0,n.useRouter)(),[r,a]=(0,t.useState)(!1),[d,o]=(0,t.useState)(""),[c,u]=(0,t.useState)({name:"",address:"",postal_code:"",city:"",property_type:"house",build_year:new Date().getFullYear(),living_area:""}),p=async r=>{r.preventDefault(),a(!0),o("");try{let{data:{session:r}}=await l.O.auth.getSession();if(!r){e.push("/login");return}let{error:s}=await l.O.from("properties").insert({user_id:r.user.id,name:c.name,address:c.address,postal_code:c.postal_code,city:c.city,property_type:c.property_type,build_year:c.build_year,living_area:c.living_area?parseFloat(c.living_area):null,country:"AT"});if(s){o(s.message),a(!1);return}window.location.href="/dashboard"}catch(e){o(e.message||"Ein Fehler ist aufgetreten"),a(!1)}};return(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 py-12 px-4",children:(0,s.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)(i.default,{href:"/dashboard",className:"text-red-600 hover:underline mb-2 inline-block",children:"← Zur\xfcck zum Dashboard"}),(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Neue Immobilie anlegen"}),(0,s.jsx)("p",{className:"text-gray-600",children:"F\xfclle die Details zu deiner Immobilie aus"})]}),d&&(0,s.jsxs)("div",{className:"bg-red-50 border border-red-200 text-red-600 p-4 rounded-lg mb-6",children:["⚠️ ",d]}),(0,s.jsxs)("form",{onSubmit:p,className:"bg-white p-8 rounded-lg shadow",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Name/Bezeichnung *"}),(0,s.jsx)("input",{type:"text",placeholder:"z.B. Haus Hauptstra\xdfe, Wohnung Stadtzentrum",value:c.name,onChange:e=>u({...c,name:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",required:!0}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Ein eindeutiger Name zur Identifikation"})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Adresse *"}),(0,s.jsx)("input",{type:"text",placeholder:"Stra\xdfe und Hausnummer",value:c.address,onChange:e=>u({...c,address:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",required:!0})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Postleitzahl *"}),(0,s.jsx)("input",{type:"text",placeholder:"1010",value:c.postal_code,onChange:e=>{let r=e.target.value.replace(/\D/g,"");u({...c,postal_code:r})},className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",pattern:"[0-9]{4,5}",maxLength:5,required:!0}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"4-5 Ziffern (AT: 4, DE: 5)"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Stadt *"}),(0,s.jsx)("input",{type:"text",placeholder:"Wien",value:c.city,onChange:e=>u({...c,city:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",required:!0})]})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Immobilientyp *"}),(0,s.jsxs)("select",{value:c.property_type,onChange:e=>u({...c,property_type:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",children:[(0,s.jsx)("option",{value:"house",children:"\uD83C\uDFE1 Einfamilienhaus"}),(0,s.jsx)("option",{value:"apartment",children:"\uD83C\uDFE2 Wohnung"}),(0,s.jsx)("option",{value:"multi_family",children:"\uD83C\uDFD8️ Mehrfamilienhaus"}),(0,s.jsx)("option",{value:"commercial",children:"\uD83C\uDFED Gewerbeobjekt"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Baujahr"}),(0,s.jsx)("input",{type:"number",placeholder:"2000",value:c.build_year,onChange:e=>u({...c,build_year:parseInt(e.target.value)}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",min:"1800",max:new Date().getFullYear()+1})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Wohnfl\xe4che (m\xb2)"}),(0,s.jsx)("input",{type:"number",placeholder:"120",value:c.living_area,onChange:e=>u({...c,living_area:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",step:"0.1"})]})]}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)("button",{type:"submit",disabled:r,className:"flex-1 bg-red-600 text-white py-3 px-6 rounded-lg font-bold hover:bg-red-700 transition disabled:opacity-50",children:r?"Wird gespeichert...":"✅ Immobilie anlegen"}),(0,s.jsx)(i.default,{href:"/dashboard",className:"px-6 py-3 border border-gray-300 rounded-lg font-bold text-gray-700 hover:bg-gray-50 transition text-center",children:"Abbrechen"})]})]})]})})}},1867:function(e,r,a){"use strict";a.d(r,{O:function(){return s}});let s=(0,a(2978).eI)("https://cfggqkjogprlzikzxijc.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNmZ2dxa2pvZ3BybHppa3p4aWpjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA2MzQzMDksImV4cCI6MjA3NjIxMDMwOX0.gyIVDXpqTWpZjKzE1qmI-ObeIb0D6pIoZPfwu3gtzpk")}},function(e){e.O(0,[978,738,293,528,744],function(){return e(e.s=4800)}),_N_E=e.O()}]);